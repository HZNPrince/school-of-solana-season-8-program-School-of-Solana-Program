{"version":3,"file":"subscription.js","sourceRoot":"","sources":["../../../src/classes/subscription.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * Switchboard Subscription SDK\n *\n * High-level functions for managing Switchboard On-Demand subscriptions.\n * Allows users to create, upgrade, downgrade, and extend their subscriptions.\n */\n\nimport { Queue } from '../accounts/queue.js';\nimport { asV0Tx } from '../index.js';\n\nimport { OracleQuote } from './oracleQuote.js';\n\nimport { BN, Program, web3 } from '@coral-xyz/anchor-31';\nimport {\n  ASSOCIATED_TOKEN_PROGRAM_ID,\n  getAssociatedTokenAddressSync,\n  TOKEN_PROGRAM_ID,\n} from '@solana/spl-token';\nimport {\n  Connection,\n  Keypair,\n  PublicKey,\n  SystemProgram,\n  SYSVAR_CLOCK_PUBKEY,\n  SYSVAR_INSTRUCTIONS_PUBKEY,\n  SYSVAR_SLOT_HASHES_PUBKEY,\n} from '@solana/web3.js';\nimport { CrossbarClient } from '@switchboard-xyz/common';\n\n/**\n * Switchboard Subscriber Program ID\n */\nexport const SUBSCRIPTION_PROGRAM_ID = new PublicKey(\n  'SbsCRB7Y3SGNEwVgvwE4R8ZYuhertgc7ekUXQbD6pNH'\n);\n\n/**\n * SWTCH Token Mint Address\n */\nexport const SWTCH_MINT = new PublicKey(\n  'SW1TCHLmRGTfW5xZknqQdpdarB8PD95sJYWpNp9TbFx'\n);\n\n/**\n * SWTCH/USDT Feed ID for oracle pricing\n */\nexport const SWTCH_FEED_ID =\n  '148aaedb33ff23593805377f131af7fe01b4770ae2b9e4a2f7f8b3a180314711';\n\n/**\n * Subscription account information\n */\nexport interface SubscriptionInfo {\n  owner: PublicKey;\n  tierId: number;\n  tierIdInTransition: number;\n  subscriptionStartEpoch: BN;\n  subscriptionEndEpoch: BN;\n  lastTierChangeEpoch: BN;\n  isActive: number;\n  authorizedUsers: PublicKey[];\n  authorizedUserCount: number;\n  totalTokensPaid: BN;\n  lastPaymentAmount: BN;\n  lastPaymentToken: PublicKey;\n  contactName: number[];\n  contactEmail: number[];\n}\n\n/**\n * Parameters for creating a new subscription\n */\nexport interface CreateSubscriptionParams {\n  /** Solana connection */\n  connection: Connection;\n  /** Payer and subscription owner */\n  payer: Keypair;\n  /** Tier ID (1=Free, 2=Pro, 3=Surge, 10+=Enterprise) */\n  tierId: number;\n  /** Number of epochs to pay for (minimum 2) */\n  epochAmount: number;\n  /** Optional contact name */\n  contactName?: string;\n  /** Optional contact email */\n  contactEmail?: string;\n  /** Switchboard queue for oracle updates */\n  queue: Queue;\n}\n\n/**\n * Parameters for upgrading a subscription\n */\nexport interface UpgradeSubscriptionParams {\n  /** Solana connection */\n  connection: Connection;\n  /** Subscription owner */\n  owner: Keypair;\n  /** New tier ID (must be more expensive than current) */\n  newTierId: number;\n  /** Number of epochs requested (credit applied, minimum 1) */\n  epochAmount: number;\n  /** Switchboard queue for oracle updates */\n  queue: Queue;\n}\n\n/**\n * Parameters for downgrading a subscription\n * Note: Downgrade is credit-only - no payment or epoch amount needed\n */\nexport interface DowngradeSubscriptionParams {\n  /** Solana connection */\n  connection: Connection;\n  /** Subscription owner */\n  owner: Keypair;\n  /** New tier ID (must be less expensive than current) */\n  newTierId: number;\n  // No epochAmount - downgrade converts all credit automatically\n  // No queue needed - no oracle price verification for credit-only operation\n}\n\n/**\n * Parameters for extending a subscription\n */\nexport interface ExtendSubscriptionParams {\n  /** Solana connection */\n  connection: Connection;\n  /** Subscription owner (or admin if adminExtend=true) */\n  owner: Keypair;\n  /** Number of epochs to add */\n  epochAmount: number;\n  /** If true, no payment required (admin only) */\n  adminExtend?: boolean;\n  /** Switchboard queue for oracle updates (required if adminExtend=false) */\n  queue?: Queue;\n}\n\n/**\n * Parameters for managing team members\n */\nexport interface ManageTeamMemberParams {\n  /** Solana connection */\n  connection: Connection;\n  /** Subscription owner */\n  owner: Keypair;\n  /** User to add/remove */\n  user: PublicKey;\n}\n\n// ============================================================================\n// PDA Derivation Helpers\n// ============================================================================\n\n/**\n * Derive the state PDA\n */\nfunction getStatePda(programId: PublicKey): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync([Buffer.from('STATE')], programId);\n}\n\n/**\n * Derive the tier PDA\n */\nfunction getTierPda(tierId: number, programId: PublicKey): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync(\n    [Buffer.from('TIER'), Buffer.from(new Uint16Array([tierId]).buffer)],\n    programId\n  );\n}\n\n/**\n * Derive the subscription PDA\n */\nfunction getSubscriptionPda(\n  owner: PublicKey,\n  programId: PublicKey\n): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync(\n    [Buffer.from('SUBSCRIPTION'), owner.toBuffer()],\n    programId\n  );\n}\n\n/**\n * Derive the token vault PDA\n */\nfunction getTokenVaultPda(\n  mint: PublicKey,\n  programId: PublicKey\n): [PublicKey, number] {\n  return PublicKey.findProgramAddressSync(\n    [Buffer.from('TOKEN_VAULT'), mint.toBuffer()],\n    programId\n  );\n}\n\n// ============================================================================\n// Oracle Helper\n// ============================================================================\n\n/**\n * Bundle oracle update with subscription instruction\n * (Pattern from test file's executeWithOracleUpdate function)\n */\nasync function executeWithOracleUpdate(\n  connection: Connection,\n  queue: Queue,\n  quoteAccount: PublicKey,\n  subscriptionIx: web3.TransactionInstruction,\n  signer: Keypair\n): Promise<string> {\n  console.log(\n    `Bundling oracle update for ${signer.publicKey.toBase58().slice(0, 8)}...`\n  );\n\n  // Create crossbar client (don't need to pass it in)\n  const crossbar = new CrossbarClient('https://crossbar.switchboard.xyz');\n\n  // Fetch oracle instructions with retry logic\n  let oracleIxs: web3.TransactionInstruction[];\n  let retries = 0;\n  const maxRetries = 5;\n\n  while (retries < maxRetries) {\n    try {\n      const result = await queue.fetchManagedUpdateIxs(\n        crossbar,\n        [SWTCH_FEED_ID],\n        {\n          payer: signer.publicKey,\n          instructionIdx: 0,\n        }\n      );\n      oracleIxs = result;\n      console.log(`Oracle instructions fetched: ${oracleIxs.length}`);\n      break;\n    } catch (e: unknown) {\n      retries++;\n      const errMsg = e instanceof Error ? e.message : String(e);\n      console.log(\n        `Oracle fetch failed (attempt ${retries}/${maxRetries}): ${errMsg.slice(0, 80)}`\n      );\n      if (retries >= maxRetries) {\n        throw new Error(\n          `Oracle fetch failed after ${maxRetries} attempts. Last error: ${errMsg}`\n        );\n      }\n      console.log('Retrying in 3 seconds...');\n      await new Promise(r => setTimeout(r, 3000));\n    }\n  }\n\n  // Bundle in atomic transaction\n  const tx = await asV0Tx({\n    connection,\n    ixs: [...oracleIxs!, subscriptionIx],\n    signers: [signer],\n    computeUnitPrice: 20_000,\n    computeUnitLimitMultiple: 1.3,\n  });\n\n  const sig = await connection.sendTransaction(tx);\n  await connection.confirmTransaction(sig, 'confirmed');\n\n  console.log(`Transaction confirmed: ${sig}`);\n\n  // Rate limiting\n  await new Promise(r => setTimeout(r, 2000));\n\n  return sig;\n}\n\n/**\n * Get the canonical oracle quote account PDA\n */\nfunction getQuoteAccount(queuePubkey: PublicKey): PublicKey {\n  // Use OracleQuote.getCanonicalPubkey directly - same as test file\n  const [quoteAccount] = OracleQuote.getCanonicalPubkey(queuePubkey, [\n    SWTCH_FEED_ID,\n  ]);\n  return quoteAccount;\n}\n\n// ============================================================================\n// Program Loading Helper\n// ============================================================================\n\n/**\n * Type for program with subscription account\n */\ninterface SubscriberProgram extends Program {\n  account: {\n    subscription: {\n      fetch: (address: PublicKey) => Promise<SubscriptionInfo>;\n    };\n  };\n}\n\n/**\n * Load the Subscriber program (fetches IDL from on-chain)\n */\nasync function loadSubscriberProgram(\n  connection: Connection,\n  programId: PublicKey\n): Promise<SubscriberProgram> {\n  try {\n    const idl = await Program.fetchIdl(programId, {\n      connection,\n    } as unknown as { connection: Connection });\n\n    if (!idl) {\n      throw new Error('Subscriber program IDL not found on-chain');\n    }\n\n    return new Program(idl, {\n      connection,\n    } as unknown as { connection: Connection }) as SubscriberProgram;\n  } catch (e) {\n    throw new Error(\n      `Failed to load Subscriber program IDL: ${e instanceof Error ? e.message : String(e)}`\n    );\n  }\n}\n\n// ============================================================================\n// Public API Functions\n// ============================================================================\n\n/**\n * Create a new subscription\n *\n * @example\n * ```typescript\n * const sig = await createSubscription({\n *   connection,\n *   payer: userKeypair,\n *   tierId: 2, // Pro tier\n *   epochAmount: 15,\n *   contactName: 'Alice',\n *   contactEmail: 'alice@example.com',\n *   queue,\n * });\n * ```\n */\nexport async function createSubscription(\n  params: CreateSubscriptionParams\n): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [tierPda] = getTierPda(params.tierId, programId);\n  const [subscriptionPda] = getSubscriptionPda(\n    params.payer.publicKey,\n    programId\n  );\n  const [tokenVaultPda] = getTokenVaultPda(SWTCH_MINT, programId);\n  const payerTokenAccount = getAssociatedTokenAddressSync(\n    SWTCH_MINT,\n    params.payer.publicKey\n  );\n  const quoteAccount = getQuoteAccount(params.queue.pubkey);\n\n  // Build subscription init instruction\n  // Note: Program will auto-create SWTCH token account if needed (init_if_needed)\n  const subscriptionIx = await program.methods\n    .subscriptionInit({\n      tierId: params.tierId,\n      contactName: params.contactName || null,\n      contactEmail: params.contactEmail || null,\n      epochAmount: new BN(params.epochAmount),\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      tier: tierPda,\n      owner: params.payer.publicKey,\n      payer: params.payer.publicKey,\n      paymentMint: SWTCH_MINT,\n      payerTokenAccount,\n      tokenVault: tokenVaultPda,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      associatedTokenProgram: ASSOCIATED_TOKEN_PROGRAM_ID,\n      systemProgram: SystemProgram.programId,\n      quoteAccount,\n      sysvars: {\n        clock: SYSVAR_CLOCK_PUBKEY,\n        slothashes: SYSVAR_SLOT_HASHES_PUBKEY,\n        instructions: SYSVAR_INSTRUCTIONS_PUBKEY,\n      },\n    })\n    .instruction();\n\n  // Execute with oracle update\n  return executeWithOracleUpdate(\n    params.connection,\n    params.queue,\n    quoteAccount,\n    subscriptionIx,\n    params.payer\n  );\n}\n\n/**\n * Upgrade subscription to a more expensive tier\n *\n * @example\n * ```typescript\n * const sig = await upgradeSubscription({\n *   connection,\n *   owner: userKeypair,\n *   newTierId: 3, // Surge tier\n *   epochAmount: 15,\n *   queue,\n * });\n * ```\n */\nexport async function upgradeSubscription(\n  params: UpgradeSubscriptionParams\n): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [newTierPda] = getTierPda(params.newTierId, programId);\n  const [subscriptionPda] = getSubscriptionPda(\n    params.owner.publicKey,\n    programId\n  );\n  const [tokenVaultPda] = getTokenVaultPda(SWTCH_MINT, programId);\n  const ownerTokenAccount = getAssociatedTokenAddressSync(\n    SWTCH_MINT,\n    params.owner.publicKey\n  );\n  const quoteAccount = getQuoteAccount(params.queue.pubkey);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [currentTierPda] = getTierPda(currentTierId, programId);\n\n  // Build upgrade instruction\n  const upgradeIx = await program.methods\n    .subscriptionUpgrade({\n      newTierId: params.newTierId,\n      epochAmount: new BN(params.epochAmount),\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      newTier: newTierPda,\n      owner: params.owner.publicKey,\n      paymentMint: SWTCH_MINT,\n      payerTokenAccount: ownerTokenAccount,\n      tokenVault: tokenVaultPda,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      quoteAccount,\n      sysvars: {\n        clock: SYSVAR_CLOCK_PUBKEY,\n        slothashes: SYSVAR_SLOT_HASHES_PUBKEY,\n        instructions: SYSVAR_INSTRUCTIONS_PUBKEY,\n      },\n    })\n    .remainingAccounts([\n      { pubkey: currentTierPda, isSigner: false, isWritable: false },\n    ])\n    .instruction();\n\n  // Execute with oracle update\n  return executeWithOracleUpdate(\n    params.connection,\n    params.queue,\n    quoteAccount,\n    upgradeIx,\n    params.owner\n  );\n}\n\n/**\n * Downgrade subscription to a less expensive tier\n *\n * @example\n * ```typescript\n * const sig = await downgradeSubscription({\n *   connection,\n *   owner: userKeypair,\n *   newTierId: 1, // Free tier\n *   epochAmount: 15,\n *   queue,\n * });\n * ```\n */\nexport async function downgradeSubscription(\n  params: DowngradeSubscriptionParams\n): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [newTierPda] = getTierPda(params.newTierId, programId);\n  const [subscriptionPda] = getSubscriptionPda(\n    params.owner.publicKey,\n    programId\n  );\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [currentTierPda] = getTierPda(currentTierId, programId);\n\n  // Build downgrade instruction (credit-only, no payment)\n  const downgradeIx = await program.methods\n    .subscriptionDowngrade({\n      newTierId: params.newTierId,\n      // No epochAmount - credit-only!\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      newTier: newTierPda,\n      owner: params.owner.publicKey,\n    })\n    .remainingAccounts([\n      { pubkey: currentTierPda, isSigner: false, isWritable: false },\n    ])\n    .instruction();\n\n  // Execute transaction (no oracle needed - credit-only operation)\n  const tx = new web3.Transaction().add(downgradeIx);\n  tx.recentBlockhash = (await params.connection.getLatestBlockhash()).blockhash;\n  tx.feePayer = params.owner.publicKey;\n  tx.partialSign(params.owner);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n/**\n * Extend an existing subscription\n *\n * @example\n * ```typescript\n * // User pays to extend\n * const sig = await extendSubscription({\n *   connection,\n *   owner: userKeypair,\n *   epochAmount: 10,\n *   queue,\n * });\n *\n * // Admin extends for free\n * const adminSig = await extendSubscription({\n *   connection,\n *   owner: adminKeypair,\n *   epochAmount: 30,\n *   adminExtend: true,\n * });\n * ```\n */\nexport async function extendSubscription(\n  params: ExtendSubscriptionParams\n): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(\n    params.owner.publicKey,\n    programId\n  );\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [tierPda] = getTierPda(currentTierId, programId);\n\n  if (params.adminExtend) {\n    // Admin extend - no payment or oracle needed\n    const extendIx = await program.methods\n      .subscriptionExtend({\n        epochAmount: new BN(params.epochAmount),\n        adminExtend: true,\n      })\n      .accounts({\n        state: statePda,\n        subscription: subscriptionPda,\n        tier: tierPda,\n        payer: params.owner.publicKey,\n        systemProgram: SystemProgram.programId,\n      })\n      .instruction();\n\n    // Execute without oracle\n    const tx = await asV0Tx({\n      connection: params.connection,\n      ixs: [extendIx],\n      signers: [params.owner],\n      computeUnitPrice: 20_000,\n      computeUnitLimitMultiple: 1.3,\n    });\n\n    const sig = await params.connection.sendTransaction(tx);\n    await params.connection.confirmTransaction(sig, 'confirmed');\n    return sig;\n  } else {\n    // User extend - requires payment and oracle\n    if (!params.queue) {\n      throw new Error('queue required for paid extends');\n    }\n\n    const [tokenVaultPda] = getTokenVaultPda(SWTCH_MINT, programId);\n    const payerTokenAccount = getAssociatedTokenAddressSync(\n      SWTCH_MINT,\n      params.owner.publicKey\n    );\n    const quoteAccount = getQuoteAccount(params.queue.pubkey);\n\n    const extendIx = await program.methods\n      .subscriptionExtend({\n        epochAmount: new BN(params.epochAmount),\n        adminExtend: false,\n      })\n      .accounts({\n        state: statePda,\n        subscription: subscriptionPda,\n        tier: tierPda,\n        payer: params.owner.publicKey,\n        paymentMint: SWTCH_MINT,\n        payerTokenAccount,\n        tokenVault: tokenVaultPda,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        systemProgram: SystemProgram.programId,\n        quoteAccount,\n        sysvars: {\n          clock: SYSVAR_CLOCK_PUBKEY,\n          slothashes: SYSVAR_SLOT_HASHES_PUBKEY,\n          instructions: SYSVAR_INSTRUCTIONS_PUBKEY,\n        },\n      })\n      .instruction();\n\n    return executeWithOracleUpdate(\n      params.connection,\n      params.queue,\n      quoteAccount,\n      extendIx,\n      params.owner\n    );\n  }\n}\n\n/**\n * Add a team member to the subscription\n *\n * @example\n * ```typescript\n * const sig = await addTeamMember({\n *   connection,\n *   owner: userKeypair,\n *   user: teammatePublicKey,\n * });\n * ```\n */\nexport async function addTeamMember(\n  params: ManageTeamMemberParams\n): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(\n    params.owner.publicKey,\n    programId\n  );\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [tierPda] = getTierPda(currentTierId, programId);\n\n  const addIx = await program.methods\n    .subscriptionManageUsers({\n      action: { add: {} },\n      user: params.user,\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      tier: tierPda,\n      owner: params.owner.publicKey,\n    })\n    .instruction();\n\n  // Execute without oracle (no payment)\n  const tx = await asV0Tx({\n    connection: params.connection,\n    ixs: [addIx],\n    signers: [params.owner],\n    computeUnitPrice: 20_000,\n    computeUnitLimitMultiple: 1.3,\n  });\n\n  const sig = await params.connection.sendTransaction(tx);\n  await params.connection.confirmTransaction(sig, 'confirmed');\n  return sig;\n}\n\n/**\n * Remove a team member from the subscription\n *\n * @example\n * ```typescript\n * const sig = await removeTeamMember({\n *   connection,\n *   owner: userKeypair,\n *   user: teammatePublicKey,\n * });\n * ```\n */\nexport async function removeTeamMember(\n  params: ManageTeamMemberParams\n): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(\n    params.owner.publicKey,\n    programId\n  );\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [tierPda] = getTierPda(currentTierId, programId);\n\n  const removeIx = await program.methods\n    .subscriptionManageUsers({\n      action: { remove: {} },\n      user: params.user,\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      tier: tierPda,\n      owner: params.owner.publicKey,\n    })\n    .instruction();\n\n  // Execute without oracle (no payment)\n  const tx = await asV0Tx({\n    connection: params.connection,\n    ixs: [removeIx],\n    signers: [params.owner],\n    computeUnitPrice: 20_000,\n    computeUnitLimitMultiple: 1.3,\n  });\n\n  const sig = await params.connection.sendTransaction(tx);\n  await params.connection.confirmTransaction(sig, 'confirmed');\n  return sig;\n}\n\n/**\n * Fetch subscription information for an owner\n *\n * @example\n * ```typescript\n * const info = await fetchSubscriptionInfo({\n *   connection,\n *   owner: userPublicKey,\n * });\n *\n * console.log(`Tier: ${info.tierId}`);\n * console.log(`Active: ${info.isActive === 1}`);\n * console.log(`Epochs: ${info.subscriptionStartEpoch} - ${info.subscriptionEndEpoch}`);\n * ```\n */\nexport async function fetchSubscriptionInfo(params: {\n  connection: Connection;\n  owner: PublicKey;\n}): Promise<SubscriptionInfo | null> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  try {\n    const subscription =\n      await program.account.subscription.fetch(subscriptionPda);\n    return subscription;\n  } catch {\n    // Subscription doesn't exist\n    return null;\n  }\n}\n\n/**\n * Close an existing subscription and reclaim rent\n *\n * Note: Subscription must be expired or inactive to close\n *\n * @example\n * ```typescript\n * const sig = await closeSubscription({\n *   connection,\n *   owner: userKeypair,\n *   destination: userKeypair.publicKey, // Where to send rent refund\n * });\n * ```\n */\nexport async function closeSubscription(params: {\n  connection: Connection;\n  owner: web3.Keypair;\n  destination?: PublicKey; // Defaults to owner if not provided\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive subscription PDA\n  const [subscriptionPda] = getSubscriptionPda(\n    params.owner.publicKey,\n    programId\n  );\n\n  const destination = params.destination || params.owner.publicKey;\n\n  // Build close instruction\n  const closeIx = await program.methods\n    .subscriptionClose({})\n    .accounts({\n      subscription: subscriptionPda,\n      owner: params.owner.publicKey,\n      destination,\n    })\n    .instruction();\n\n  // Execute transaction\n  const tx = new web3.Transaction().add(closeIx);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = params.owner.publicKey;\n  tx.partialSign(params.owner);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n// ============================================================================\n// INSTRUCTION-ONLY FUNCTIONS (for wallet adapters)\n// ============================================================================\n\n/**\n * Build create subscription instruction (does not send transaction)\n * Use this for wallet adapters that need to sign transactions\n *\n * @example\n * ```typescript\n * const ix = await createSubscriptionIx({\n *   connection,\n *   owner: userPublicKey,\n *   tierId: 2,\n *   epochAmount: 15,\n *   queue,\n * });\n * // Sign and send with wallet adapter\n * await sendTransaction(transaction.add(ix), connection);\n * ```\n */\nexport async function createSubscriptionIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  tierId: number;\n  epochAmount: number;\n  contactName?: string;\n  contactEmail?: string;\n  queue: Queue;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [tierPda] = getTierPda(params.tierId, programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n  const [tokenVaultPda] = getTokenVaultPda(SWTCH_MINT, programId);\n  const payerTokenAccount = getAssociatedTokenAddressSync(\n    SWTCH_MINT,\n    params.owner\n  );\n  const quoteAccount = getQuoteAccount(params.queue.pubkey);\n\n  // Build subscription init instruction\n  const subscriptionIx = await program.methods\n    .subscriptionInit({\n      tierId: params.tierId,\n      contactName: params.contactName || null,\n      contactEmail: params.contactEmail || null,\n      epochAmount: new BN(params.epochAmount),\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      tier: tierPda,\n      owner: params.owner,\n      payer: params.owner,\n      paymentMint: SWTCH_MINT,\n      payerTokenAccount,\n      tokenVault: tokenVaultPda,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      associatedTokenProgram: ASSOCIATED_TOKEN_PROGRAM_ID,\n      systemProgram: SystemProgram.programId,\n      quoteAccount,\n      sysvars: {\n        clock: SYSVAR_CLOCK_PUBKEY,\n        slothashes: SYSVAR_SLOT_HASHES_PUBKEY,\n        instructions: SYSVAR_INSTRUCTIONS_PUBKEY,\n      },\n    })\n    .instruction();\n\n  return subscriptionIx;\n}\n\n/**\n * Build upgrade subscription instruction (does not send transaction)\n *\n * @example\n * ```typescript\n * const ix = await upgradeSubscriptionIx({\n *   connection,\n *   owner: userPublicKey,\n *   newTierId: 3,\n *   epochAmount: 15,\n *   queue,\n * });\n * ```\n */\nexport async function upgradeSubscriptionIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  newTierId: number;\n  epochAmount: number;\n  queue: Queue;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [newTierPda] = getTierPda(params.newTierId, programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n  const [tokenVaultPda] = getTokenVaultPda(SWTCH_MINT, programId);\n  const ownerTokenAccount = getAssociatedTokenAddressSync(\n    SWTCH_MINT,\n    params.owner\n  );\n  const quoteAccount = getQuoteAccount(params.queue.pubkey);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [currentTierPda] = getTierPda(currentTierId, programId);\n\n  // Build upgrade instruction\n  const upgradeIx = await program.methods\n    .subscriptionUpgrade({\n      newTierId: params.newTierId,\n      epochAmount: new BN(params.epochAmount),\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      newTier: newTierPda,\n      owner: params.owner,\n      paymentMint: SWTCH_MINT,\n      payerTokenAccount: ownerTokenAccount,\n      tokenVault: tokenVaultPda,\n      tokenProgram: TOKEN_PROGRAM_ID,\n      quoteAccount,\n      sysvars: {\n        clock: SYSVAR_CLOCK_PUBKEY,\n        slothashes: SYSVAR_SLOT_HASHES_PUBKEY,\n        instructions: SYSVAR_INSTRUCTIONS_PUBKEY,\n      },\n    })\n    .remainingAccounts([\n      { pubkey: currentTierPda, isSigner: false, isWritable: false },\n    ])\n    .instruction();\n\n  return upgradeIx;\n}\n\n/**\n * Build downgrade subscription instruction (does not send transaction)\n * Note: Downgrade is credit-only, no oracle needed\n *\n * @example\n * ```typescript\n * const ix = await downgradeSubscriptionIx({\n *   connection,\n *   owner: userPublicKey,\n *   newTierId: 1,\n * });\n * ```\n */\nexport async function downgradeSubscriptionIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  newTierId: number;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [newTierPda] = getTierPda(params.newTierId, programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [currentTierPda] = getTierPda(currentTierId, programId);\n\n  // Build downgrade instruction (credit-only, no payment)\n  const downgradeIx = await program.methods\n    .subscriptionDowngrade({\n      newTierId: params.newTierId,\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      newTier: newTierPda,\n      owner: params.owner,\n    })\n    .remainingAccounts([\n      { pubkey: currentTierPda, isSigner: false, isWritable: false },\n    ])\n    .instruction();\n\n  return downgradeIx;\n}\n\n/**\n * Build extend subscription instruction (does not send transaction)\n *\n * @example\n * ```typescript\n * const ix = await extendSubscriptionIx({\n *   connection,\n *   owner: userPublicKey,\n *   epochAmount: 10,\n *   queue,\n * });\n * ```\n */\nexport async function extendSubscriptionIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  epochAmount: number;\n  adminExtend?: boolean;\n  queue?: Queue;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [tierPda] = getTierPda(currentTierId, programId);\n\n  if (params.adminExtend) {\n    // Admin extend - no payment or oracle needed\n    const extendIx = await program.methods\n      .subscriptionExtend({\n        epochAmount: new BN(params.epochAmount),\n        adminExtend: true,\n      })\n      .accounts({\n        state: statePda,\n        subscription: subscriptionPda,\n        tier: tierPda,\n        payer: params.owner,\n        systemProgram: SystemProgram.programId,\n      })\n      .instruction();\n\n    return extendIx;\n  } else {\n    // User extend - requires payment and oracle\n    if (!params.queue) {\n      throw new Error('queue required for paid extends');\n    }\n\n    const [tokenVaultPda] = getTokenVaultPda(SWTCH_MINT, programId);\n    const payerTokenAccount = getAssociatedTokenAddressSync(\n      SWTCH_MINT,\n      params.owner\n    );\n    const quoteAccount = getQuoteAccount(params.queue.pubkey);\n\n    const extendIx = await program.methods\n      .subscriptionExtend({\n        epochAmount: new BN(params.epochAmount),\n        adminExtend: false,\n      })\n      .accounts({\n        state: statePda,\n        subscription: subscriptionPda,\n        tier: tierPda,\n        payer: params.owner,\n        paymentMint: SWTCH_MINT,\n        payerTokenAccount,\n        tokenVault: tokenVaultPda,\n        tokenProgram: TOKEN_PROGRAM_ID,\n        systemProgram: SystemProgram.programId,\n        quoteAccount,\n        sysvars: {\n          clock: SYSVAR_CLOCK_PUBKEY,\n          slothashes: SYSVAR_SLOT_HASHES_PUBKEY,\n          instructions: SYSVAR_INSTRUCTIONS_PUBKEY,\n        },\n      })\n      .instruction();\n\n    return extendIx;\n  }\n}\n\n/**\n * Build add team member instruction (does not send transaction)\n *\n * @example\n * ```typescript\n * const ix = await addTeamMemberIx({\n *   connection,\n *   owner: userPublicKey,\n *   user: teamMemberPublicKey,\n * });\n * ```\n */\nexport async function addTeamMemberIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  user: PublicKey;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [tierPda] = getTierPda(currentTierId, programId);\n\n  const addIx = await program.methods\n    .subscriptionManageUsers({\n      action: { add: {} },\n      user: params.user,\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      tier: tierPda,\n      owner: params.owner,\n    })\n    .instruction();\n\n  return addIx;\n}\n\n/**\n * Build remove team member instruction (does not send transaction)\n *\n * @example\n * ```typescript\n * const ix = await removeTeamMemberIx({\n *   connection,\n *   owner: userPublicKey,\n *   user: teamMemberPublicKey,\n * });\n * ```\n */\nexport async function removeTeamMemberIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  user: PublicKey;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive PDAs\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n  const [tierPda] = getTierPda(currentTierId, programId);\n\n  const removeIx = await program.methods\n    .subscriptionManageUsers({\n      action: { remove: {} },\n      user: params.user,\n    })\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      tier: tierPda,\n      owner: params.owner,\n    })\n    .instruction();\n\n  return removeIx;\n}\n\n/**\n * Build close subscription instruction (does not send transaction)\n *\n * @example\n * ```typescript\n * const ix = await closeSubscriptionIx({\n *   connection,\n *   owner: userPublicKey,\n *   destination: userPublicKey,\n * });\n * ```\n */\nexport async function closeSubscriptionIx(params: {\n  connection: Connection;\n  owner: PublicKey;\n  destination?: PublicKey;\n}): Promise<web3.TransactionInstruction> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  // Derive subscription PDA\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n  const destination = params.destination || params.owner;\n\n  // Build close instruction\n  const closeIx = await program.methods\n    .subscriptionClose({})\n    .accounts({\n      subscription: subscriptionPda,\n      owner: params.owner,\n      destination,\n    })\n    .instruction();\n\n  return closeIx;\n}\n\n// ============================================================================\n// ADMIN SDK - Program Authority Functions\n// ============================================================================\n\n/**\n * Initialize the subscriber program state (one-time setup, admin only)\n *\n * Must be called by program upgrade authority\n *\n * @example\n * ```typescript\n * const sig = await initializeState({\n *   connection,\n *   authority: authorityKeypair,\n *   swtchMint: new PublicKey('SW1TCH...'),\n *   swtchFeedId: '148aaedb33ff23593805377f131af7fe01b4770ae2b9e4a2f7f8b3a180314711',\n * });\n * ```\n */\nexport async function initializeState(params: {\n  connection: Connection;\n  authority: web3.Keypair; // Must be program upgrade authority\n  payer?: web3.Keypair; // Defaults to authority\n  swtchMint: PublicKey;\n  swtchFeedId: string; // Hex string (32 bytes)\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n  const payer = params.payer || params.authority;\n\n  // Derive state PDA\n  const [statePda] = getStatePda(programId);\n\n  // Derive program data PDA (for upgrade authority check)\n  const BPF_LOADER_UPGRADEABLE = new PublicKey(\n    'BPFLoaderUpgradeab1e11111111111111111111111'\n  );\n  const [programDataPda] = PublicKey.findProgramAddressSync(\n    [programId.toBuffer()],\n    BPF_LOADER_UPGRADEABLE\n  );\n\n  // Convert hex string to byte array\n  const hexStr = params.swtchFeedId.replace(/^0x/, '');\n  const swtchFeedId = Array.from(Buffer.from(hexStr, 'hex'));\n\n  if (swtchFeedId.length !== 32) {\n    throw new Error('Feed ID must be 32 bytes (64 hex characters)');\n  }\n\n  const stateParams = {\n    swtchMint: params.swtchMint,\n    swtchFeedId,\n  };\n\n  const ix = await program.methods\n    .stateInit(stateParams)\n    .accounts({\n      state: statePda,\n      payer: payer.publicKey,\n      authority: params.authority.publicKey,\n      programData: programDataPda,\n    })\n    .instruction();\n\n  // Execute transaction\n  const tx = new web3.Transaction().add(ix);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = payer.publicKey;\n\n  const signers = [payer];\n  if (params.authority.publicKey.toBase58() !== payer.publicKey.toBase58()) {\n    signers.push(params.authority);\n  }\n  tx.partialSign(...signers);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n/**\n * Update program state configuration (admin only)\n *\n * @example\n * ```typescript\n * const sig = await updateStateConfig({\n *   connection,\n *   authority: authorityKeypair,\n *   swtchMint: new PublicKey('NEW_MINT...'),\n *   swtchFeedId: 'new_feed_id_hex',\n * });\n * ```\n */\nexport async function updateStateConfig(params: {\n  connection: Connection;\n  authority: web3.Keypair;\n  swtchMint?: PublicKey;\n  swtchFeedId?: string; // Hex string\n  epochLength?: number;\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  const [statePda] = getStatePda(programId);\n\n  let swtchFeedIdBytes: number[] | null = null;\n  if (params.swtchFeedId) {\n    const hexStr = params.swtchFeedId.replace(/^0x/, '');\n    const bytes = Array.from(Buffer.from(hexStr, 'hex'));\n    if (bytes.length !== 32) {\n      throw new Error('Feed ID must be 32 bytes (64 hex characters)');\n    }\n    swtchFeedIdBytes = bytes;\n  }\n\n  const updateParams = {\n    swtchMint: params.swtchMint || null,\n    swtchFeedId: swtchFeedIdBytes,\n    epochLength: params.epochLength ? new BN(params.epochLength) : null,\n  };\n\n  const ix = await program.methods\n    .stateUpdateConfig(updateParams)\n    .accounts({\n      state: statePda,\n      authority: params.authority.publicKey,\n    })\n    .instruction();\n\n  const tx = new web3.Transaction().add(ix);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = params.authority.publicKey;\n  tx.partialSign(params.authority);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n/**\n * Create a new pricing tier (admin only)\n *\n * @example\n * ```typescript\n * const sig = await createTier({\n *   connection,\n *   authority: authorityKeypair,\n *   tierId: 2,\n *   name: 'Pro',\n *   displayName: 'Pro Plan',\n *   description: 'Professional tier with enhanced limits',\n *   maxConnections: 15,\n *   maxFeeds: 300,\n *   maxFeedsPerIx: 6,\n *   minDelayMs: 300,\n *   maxAuthorizedUsers: 5,\n *   costPerEpochUsdCents: 10000, // 100 USD per epoch\n *   isPublic: true,\n * });\n * ```\n */\nexport async function createTier(params: {\n  connection: Connection;\n  authority: web3.Keypair;\n  payer?: web3.Keypair;\n  tierId: number;\n  name: string;\n  displayName: string;\n  description: string;\n  maxConnections: number;\n  maxFeeds: number;\n  maxFeedsPerIx: number;\n  minDelayMs: number;\n  maxAuthorizedUsers: number;\n  costPerEpochUsdCents: number;\n  isPublic: boolean;\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n  const payer = params.payer || params.authority;\n\n  const [statePda] = getStatePda(programId);\n  const [tierPda] = getTierPda(params.tierId, programId);\n\n  const tierParams = {\n    tierId: params.tierId,\n    name: params.name,\n    displayName: params.displayName,\n    description: params.description,\n    maxConnections: params.maxConnections,\n    maxFeeds: params.maxFeeds,\n    maxFeedsPerIx: params.maxFeedsPerIx,\n    minDelayMs: params.minDelayMs,\n    maxAuthorizedUsers: params.maxAuthorizedUsers,\n    costPerEpochUsdCents: new BN(params.costPerEpochUsdCents),\n    isPublic: params.isPublic,\n  };\n\n  const ix = await program.methods\n    .tierCreate(tierParams)\n    .accounts({\n      state: statePda,\n      tier: tierPda,\n      payer: payer.publicKey,\n      authority: params.authority.publicKey,\n    })\n    .instruction();\n\n  const tx = new web3.Transaction().add(ix);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = payer.publicKey;\n\n  const signers = [payer];\n  if (params.authority.publicKey.toBase58() !== payer.publicKey.toBase58()) {\n    signers.push(params.authority);\n  }\n  tx.partialSign(...signers);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n/**\n * Update an existing tier (admin only)\n *\n * All parameters are optional - only provided values will be updated\n *\n * @example\n * ```typescript\n * const sig = await updateTier({\n *   connection,\n *   authority: authorityKeypair,\n *   tierId: 2,\n *   costPerEpochUsdCents: 15000, // Update price to 150 USD\n *   minDelayMs: 100, // Update rate limit\n * });\n * ```\n */\nexport async function updateTier(params: {\n  connection: Connection;\n  authority: web3.Keypair;\n  tierId: number;\n  name?: string;\n  displayName?: string;\n  description?: string;\n  maxConnections?: number;\n  maxFeeds?: number;\n  maxFeedsPerIx?: number;\n  minDelayMs?: number;\n  maxAuthorizedUsers?: number;\n  costPerEpochUsdCents?: number;\n  isPublic?: boolean;\n  enabled?: boolean;\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  const [statePda] = getStatePda(programId);\n  const [tierPda] = getTierPda(params.tierId, programId);\n\n  const updateParams = {\n    name: params.name || null,\n    displayName: params.displayName || null,\n    description: params.description || null,\n    maxConnections: params.maxConnections ?? null,\n    maxFeeds: params.maxFeeds ?? null,\n    maxFeedsPerIx: params.maxFeedsPerIx ?? null,\n    minDelayMs: params.minDelayMs ?? null,\n    maxAuthorizedUsers: params.maxAuthorizedUsers ?? null,\n    costPerEpochUsdCents: params.costPerEpochUsdCents\n      ? new BN(params.costPerEpochUsdCents)\n      : null,\n    isPublic: params.isPublic ?? null,\n    enabled: params.enabled ?? null,\n  };\n\n  const ix = await program.methods\n    .tierUpdate(updateParams)\n    .accounts({\n      state: statePda,\n      tier: tierPda,\n      authority: params.authority.publicKey,\n    })\n    .instruction();\n\n  const tx = new web3.Transaction().add(ix);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = params.authority.publicKey;\n  tx.partialSign(params.authority);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n/**\n * Admin-managed subscription update (admin only)\n *\n * Allows admins to forcefully change tier, activate/deactivate, extend for free, or update contact info\n *\n * @example\n * ```typescript\n * // Force tier change\n * const sig = await adminManageSubscription({\n *   connection,\n *   authority: authorityKeypair,\n *   owner: new PublicKey('user...'),\n *   setTierId: 3,\n * });\n *\n * // Extend subscription for free\n * const sig = await adminManageSubscription({\n *   connection,\n *   authority: authorityKeypair,\n *   owner: new PublicKey('user...'),\n *   extendEpochs: 30,\n * });\n *\n * // Deactivate subscription\n * const sig = await adminManageSubscription({\n *   connection,\n *   authority: authorityKeypair,\n *   owner: new PublicKey('user...'),\n *   setActive: false,\n * });\n * ```\n */\nexport async function adminManageSubscription(params: {\n  connection: Connection;\n  authority: web3.Keypair;\n  owner: PublicKey; // Subscription owner (not signer)\n  setTierId?: number;\n  setActive?: boolean;\n  extendEpochs?: number;\n  updateContactName?: string;\n  updateContactEmail?: string;\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  const adminParams = {\n    setTierId: params.setTierId ?? null,\n    setActive: params.setActive ?? null,\n    extendEpochs: params.extendEpochs ? new BN(params.extendEpochs) : null,\n    updateContactName: params.updateContactName || null,\n    updateContactEmail: params.updateContactEmail || null,\n  };\n\n  const ix = await program.methods\n    .subscriptionAdminManage(adminParams)\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      authority: params.authority.publicKey,\n    })\n    .instruction();\n\n  const tx = new web3.Transaction().add(ix);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = params.authority.publicKey;\n  tx.partialSign(params.authority);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n\n/**\n * Admin-only tier change with automatic pro-rating (admin only)\n *\n * @example\n * ```typescript\n * const sig = await adminSetTier({\n *   connection,\n *   authority: authorityKeypair,\n *   owner: new PublicKey('user...'),\n *   newTierId: 3,\n * });\n * ```\n */\nexport async function adminSetTier(params: {\n  connection: Connection;\n  authority: web3.Keypair;\n  owner: PublicKey; // Subscription owner\n  newTierId: number;\n}): Promise<string> {\n  const programId = SUBSCRIPTION_PROGRAM_ID;\n  const program = await loadSubscriberProgram(params.connection, programId);\n\n  const [statePda] = getStatePda(programId);\n  const [subscriptionPda] = getSubscriptionPda(params.owner, programId);\n\n  // Fetch subscription to get current tier\n  const subscription =\n    await program.account.subscription.fetch(subscriptionPda);\n  const currentTierId = subscription.tierId;\n\n  const [newTierPda] = getTierPda(params.newTierId, programId);\n  const [oldTierPda] = getTierPda(currentTierId, programId);\n\n  const tierParams = {\n    newTierId: params.newTierId,\n  };\n\n  const ix = await program.methods\n    .subscriptionSetTier(tierParams)\n    .accounts({\n      state: statePda,\n      subscription: subscriptionPda,\n      newTier: newTierPda,\n      oldTier: oldTierPda,\n      authority: params.authority.publicKey,\n    })\n    .instruction();\n\n  const tx = new web3.Transaction().add(ix);\n  const latestBlockhash = await params.connection.getLatestBlockhash();\n  tx.recentBlockhash = latestBlockhash.blockhash;\n  tx.feePayer = params.authority.publicKey;\n  tx.partialSign(params.authority);\n\n  const sig = await params.connection.sendRawTransaction(tx.serialize());\n  await params.connection.confirmTransaction({\n    signature: sig,\n    blockhash: latestBlockhash.blockhash,\n    lastValidBlockHeight: latestBlockhash.lastValidBlockHeight,\n  });\n\n  return sig;\n}\n"]}